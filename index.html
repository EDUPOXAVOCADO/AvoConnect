<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AvoConnect | Lo que te une a la comunidad aguacate</title>

  <!-- Bootstrap & Fuentes -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    rel="stylesheet"
  />

  <!-- Feednami para RSS sin CORS -->
  <script src="https://feednami.com/assets/js/feednami-client-v1.2.js"></script>

  <!-- Chart.js & plugins -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

  <style>
    :root {
      --ac-green: #3fa34d;
      --ac-green-dark: #2e7e3a;
      --ac-light: #f7fdfa;
      --ac-dark: #20341d;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--ac-light);
      margin: 0;
      color: var(--ac-dark);
    }
    .header-banner {
      height: 6px;
      background: var(--ac-green);
    }
    header.main-header {
      background: var(--ac-green-dark);
      color: #fff;
      padding: 1rem 0;
      text-align: center;
    }
    #avocado {
      font-size: 2rem;
      display: inline-block;
      transform: translateX(-200px);
      animation: walk 2s ease-out forwards, sway 1s ease-in-out 1 2.5s forwards;
      vertical-align: middle;
    }
    #site-title {
      font-size: 2rem;
      font-weight: 600;
      margin-left: 0.5rem;
      vertical-align: middle;
    }
    @keyframes walk {
      to {
        transform: translateX(0);
      }
    }
    @keyframes sway {
      0% {
        transform: translateX(0) rotate(0deg);
      }
      25% {
        transform: translateX(0) rotate(15deg);
      }
      75% {
        transform: translateX(0) rotate(-15deg);
      }
      100% {
        transform: translateX(0) rotate(0deg);
      }
    }
    nav.navbar {
      margin-bottom: 1rem;
    }

    /* Noticias */
    #noticias-pequeno {
      background: #fff;
      border: 1px solid var(--ac-green);
      border-radius: 8px;
      margin: 1rem auto;
      padding: 1rem;
      max-width: 600px;
    }
    #noticias-pequeno h2 {
      margin-bottom: 1rem;
    }
    #news-container .card {
      border: none;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      position: relative;
    }
    #news-container .card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    #news-container .overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      padding: 0.75rem;
      font-size: 0.95rem;
      line-height: 1.2;
    }

    /* Informaci√≥n / Valores */
    #informacion h2 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    blockquote {
      font-style: italic;
      color: var(--ac-green-dark);
      border-left: 4px solid var(--ac-green);
      padding-left: 1rem;
    }

    /* Gr√°fica hist√≥rica */
    #chart-controls {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    #chart-controls .btn {
      margin: 0 0.25rem;
    }
    #exportChart {
      max-height: 400px;
    }

    footer {
      background: var(--ac-dark);
      color: #fff;
      text-align: center;
      padding: 1rem 0;
      margin-top: 2rem;
    }
  </style>
</head>

<body>
  <div class="header-banner"></div>
  <header class="main-header">
    <span id="avocado">ü•ë</span>
    <span id="site-title">AvoConnect</span>
  </header>

  <!-- Navbar responsivo -->
  <nav class="navbar navbar-expand-md navbar-dark bg-success">
    <div class="container">
      <a class="navbar-brand" href="#">AvoConnect</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="#informacion">Informaci√≥n</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#empaques-autorizados">Empaques</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#exportacion">Exportaci√≥n</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#nacional">Nacional</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#organico">Org√°nico</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#ingresar">Ingresar</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#ayuda">Ayuda</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- √öltimas noticias (El Universal - secci√≥n Nacional) -->
  <section id="noticias-pequeno" class="container py-5">
    <h2>√öltimas noticias</h2>
    <div id="news-container" class="row gy-4">
      <p>Cargando noticias‚Ä¶</p>
    </div>
  </section>

  <!-- Informaci√≥n: valores & frase -->
  <section id="informacion" class="container py-5">
    <div class="row gy-4">
      <div class="col-md-6">
        <h2>Valores de la comunidad</h2>
        <p>
          ‚ÄúInnovaci√≥n, transparencia y sostenibilidad: cultivamos liderazgo juntos.‚Äù
        </p>
      </div>
      <div class="col-md-6">
        <h2>Frase del d√≠a</h2>
        <blockquote>
          ‚ÄúEn Michoac√°n, cultivamos m√°s que aguacates; cultivamos comunidad.‚Äù
        </blockquote>
      </div>
    </div>
  </section>

  <!-- Gr√°fica hist√≥rica propia -->
  <section id="price-chart" class="container py-5">
    <h2>Evoluci√≥n de exportaciones de aguacate a EE. UU. (2019‚Äìpresente)</h2>
    <div id="chart-controls">
      <button id="btn5y" class="btn btn-ac">5 a√±os</button>
      <button id="btn1y" class="btn btn-ac">1 a√±o</button>
    </div>
    <canvas id="exportChart"></canvas>
  </section>

  <!-- Secciones futuras -->
  <section id="empaques-autorizados" class="container py-5"></section>
  <section id="exportacion" class="container py-5"></section>
  <section id="nacional" class="container py-5"></section>
  <section id="organico" class="container py-5"></section>
  <section id="ayuda" class="container py-5"></section>

  <!-- Footer -->
  <footer>
    <small>&copy; 2025 AvoConnect ¬∑ Hecho en Uruapan con ‚ù§Ô∏è</small>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ====== Noticias: Feednami RSS de El Universal - Nacional ======
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('news-container');
      feednami.load(
        'http://www.eluniversal.com.mx/rss/mexico.xml',
        result => {
          if (result.error) {
            container.innerHTML = '<p>No se pudieron cargar noticias.</p>';
          } else {
            const entries = result.feed.entries.slice(0, 3);
            container.innerHTML = entries
              .map(
                entry => `
            <div class="col-12 col-md-4">
              <div class="card position-relative">
                <a href="${entry.link}" target="_blank" style="display:block;">
                  <img
                    src="${entry.enclosureUrl ||
                      entry.media ||
                      'https://via.placeholder.com/600x400?text=Sin+imagen'}"
                    class="card-img-top"
                    alt="${entry.title}"
                  />
                  <div class="overlay">${entry.title}</div>
                </a>
              </div>
            </div>
          `
              )
              .join('');
          }
        }
      );
    });

    // ====== Gr√°fica con Chart.js ======
    (function () {
      const rawData = [
        { x: '2019-01-01', y: 800 },
        { x: '2020-01-01', y: 950 },
        { x: '2021-01-01', y: 1100 },
        { x: '2022-01-01', y: 1300 },
        { x: '2023-01-01', y: 1500 },
        { x: '2024-01-01', y: 1600 },
      ];
      const ctx = document.getElementById('exportChart').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [
            {
              label: 'Exportaciones (toneladas)',
              data: rawData,
              borderColor: 'var(--ac-green-dark)',
              backgroundColor: 'rgba(63,163,77,0.2)',
              pointRadius: 3,
              fill: true,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            x: {
              type: 'time',
              time: { unit: 'year', tooltipFormat: 'YYYY' },
              title: { display: true, text: 'A√±o' },
            },
            y: {
              title: { display: true, text: 'Toneladas' },
            },
          },
          plugins: {
            zoom: {
              pan: { enabled: true, mode: 'x' },
              zoom: { wheel: { enabled: true }, mode: 'x' },
            },
            legend: { display: false },
          },
          interaction: { intersect: false, mode: 'index' },
        },
      });

      document.getElementById('btn5y').addEventListener('click', () => {
        chart.options.scales.x.time.min = '2019-01-01';
        chart.options.scales.x.time.max = undefined;
        chart.update();
      });
      document.getElementById('btn1y').addEventListener('click', () => {
        const today = new Date();
        const lastYear = new Date(
          today.getFullYear() - 1,
          today.getMonth(),
          today.getDate()
        )
          .toISOString()
          .split('T')[0];
        chart.options.scales.x.time.min = lastYear;
        chart.options.scales.x.time.max = undefined;
        chart.update();
      });
    })();
  </script>
</body>
</html>
