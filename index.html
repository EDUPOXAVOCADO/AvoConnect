<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AvoConnect | Precios de aguacate & Venta de lotes</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Inter Font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --ac-green: #3fa34d;
      --ac-dark: #20341d;
      --ac-light: #f7fdfa;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--ac-light);
      color: var(--ac-dark);
    }
    .header-banner {
      height: 6px;
      background: var(--ac-green);
    }
    header {
      background: #fff;
      padding: 2rem 0 1rem;
      text-align: center;
    }
    #header-container {
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    #site-title {
      font-size: 3.5rem;
      font-weight: 600;
      margin: 0 0.5rem;
    }
    #avocado {
      width: 60px;
      display: inline-block;
      transform: translateX(-200px);
      animation:
        walk 2s ease-out forwards,
        sway 1s ease-in-out 1 2.5s forwards;
    }
    @keyframes walk {
      to { transform: translateX(0); }
    }
    @keyframes sway {
      0%   { transform: translateX(0) rotate(0deg); }
      25%  { transform: translateX(0) rotate(15deg); }
      75%  { transform: translateX(0) rotate(-15deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }
    .btn-ac {
      background: var(--ac-green);
      color: #fff;
      border: none;
    }
    .btn-ac:hover { background: #2e7e3a; }
    h2 { font-weight: 600; margin-top: 2rem; }
    .gallery img, .card-img-top, .img-fluid {
      border-radius: 8px;
      object-fit: cover;
    }
  </style>
</head>
<body>

  <div class="header-banner"></div>
  <header>
    <div id="header-container">
      <img id="avocado"
           src="https://twemoji.maxcdn.com/v/latest/72x72/1f951.png"
           alt="Aguacatito caminando"/>
      <h1 id="site-title">AvoConnect</h1>
    </div>
  </header>

  <!-- Hero -->
  <section class="container text-center">
    <p class="lead mb-4">
      Compara lo que paga cada empacadora según gramaje y origen (nacional o exportación).
    </p>
    <a class="btn btn-ac btn-lg" href="#">Avísenme cuando salga</a>
  </section>

  <!-- Galería de portada -->
  <section class="container gallery my-5">
    <div class="row g-3">
      <div class="col-md-4">
        <img src="https://images.unsplash.com/photo-1574300403153-e4c1a53f6a71?auto=format&fit=crop&w=600&q=60"
             alt="Aguacate fresco" height="200"/>
      </div>
      <div class="col-md-4">
        <img src="https://images.unsplash.com/photo-1574231140919-8fa4f8b9d8c2?auto=format&fit=crop&w=600&q=60"
             alt="Corte de aguacate" height="200"/>
      </div>
      <div class="col-md-4">
        <img src="https://images.unsplash.com/photo-1592928306648-c3c87b635150?auto=format&fit=crop&w=600&q=60"
             alt="Productor cortando aguacate" height="200"/>
      </div>
    </div>
  </section>

  <!-- Tableros de precios -->
  <section class="container">
    <h2 class="text-center">Tableros de precios</h2>
    <div class="row g-4 my-4">
      <!-- Por empaque -->
      <div class="col-md-6">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-light">
            <h5 class="mb-0">Tablero de precios por empaque</h5>
          </div>
          <div class="table-responsive">
            <table class="table mb-0">
              <thead>
                <tr><th>Empacadora</th><th>Precio (MXN/kg)</th><th></th></tr>
              </thead>
              <tbody id="table-empaque"></tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Por gramaje -->
      <div class="col-md-6">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-light">
            <h5 class="mb-0">Precio por gramaje</h5>
          </div>
          <div class="table-responsive">
            <table class="table mb-0">
              <thead>
                <tr><th>Gramaje (g)</th><th>Precio (MXN)</th><th></th></tr>
              </thead>
              <tbody id="table-gramaje"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Recomendaciones -->
  <section class="container border-top py-5">
    <h2 class="text-center">Recomendaciones de empacadoras</h2>
    <div class="row g-4 mt-3">
      <div class="col-md-4">
        <div class="card h-100 shadow-sm text-center">
          <img src="https://images.unsplash.com/photo-1590259946311-4fbf8f181b15?auto=format&fit=crop&w=600&q=60"
               class="card-img-top" alt="Empacadora Nacional"/>
          <div class="card-body">
            <h5 class="card-title">Empacadora México</h5>
            <p class="card-text">Para fruta nacional, certificación C-123.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100 shadow-sm text-center">
          <img src="https://images.unsplash.com/photo-1600185363910-1f12badb3ce1?auto=format&fit=crop&w=600&q=60"
               class="card-img-top" alt="Empacadora Exportación"/>
          <div class="card-body">
            <h5 class="card-title">ExportaPlus</h5>
            <p class="card-text">Especializada en exportación, cumple FDA y UE.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card h-100 shadow-sm text-center">
          <img src="https://images.unsplash.com/photo-1587301165714-228e1daf4e29?auto=format&fit=crop&w=600&q=60"
               class="card-img-top" alt="Empacadora Orgánico"/>
          <div class="card-body">
            <h5 class="card-title">OrganoAvo</h5>
            <p class="card-text">100% orgánica, certificada por EcoCert.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de edición -->
  <section id="edit-section" class="container py-5" style="display:none;">
    <h2 class="text-center">Editar registro</h2>
    <form id="edit-form" class="mx-auto" style="max-width:400px;">
      <div id="edit-fields" class="mb-3"></div>
      <button type="submit" class="btn btn-ac">Guardar</button>
      <button type="button" class="btn btn-secondary" id="cancel-btn">Cancelar</button>
    </form>
  </section>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-3">
    <small>&copy; 2025 AvoConnect · Hecho en Uruapan con ❤️ y mucho aguacate</small>
  </footer>

  <script>
    const isDirector = true;
    const dataByEmpaque = [
      { name: 'Empacadora A', price: 22 },
      { name: 'Empacadora B', price: 20 },
      { name: 'Empacadora C', price: 18 }
    ];
    const dataByGramaje = [
      { gramos: 50, price: 10 },
      { gramos: 70, price: 14 },
      { gramos: 100, price: 20 }
    ];

    function renderTables() {
      ['empaque', 'gramaje'].forEach(mode => {
        const tbody = document.getElementById('table-' + mode);
        tbody.innerHTML = '';
        const arr = mode==='empaque' ? dataByEmpaque : dataByGramaje;
        arr.sort((a,b)=>b.price-a.price).forEach((item,i) => {
          const tr = document.createElement('tr');
          if(mode==='empaque') {
            tr.innerHTML = `<td>${item.name}</td>
                            <td>${item.price.toFixed(2)}</td>
                            <td>${isDirector ? 
                              `<button class="btn btn-sm btn-primary edit-btn" data-mode="empaque" data-index="${i}">Editar</button>` 
                              : ''}</td>`;
          } else {
            tr.innerHTML = `<td>${item.gramos}</td>
                            <td>${item.price.toFixed(2)}</td>
                            <td>${isDirector ? 
                              `<button class="btn btn-sm btn-primary edit-btn" data-mode="gramaje" data-index="${i}">Editar</button>` 
                              : ''}</td>`;
          }
          tbody.appendChild(tr);
        });
      });
      attachEditListeners();
    }

    function attachEditListeners() {
      document.querySelectorAll('.edit-btn').forEach(btn => {
        btn.onclick = () => {
          const mode = btn.dataset.mode;
          const idx = btn.dataset.index;
          showEditForm(mode, idx);
        };
      });
    }

    function showEditForm(mode, idx) {
      const section = document.getElementById('edit-section');
      const container = document.getElementById('edit-fields');
      container.innerHTML = '';
      let item = mode==='empaque' ? { ...dataByEmpaque[idx] } : { ...dataByGramaje[idx] };
      if(mode==='empaque') {
        container.innerHTML += `
          <label>Nombre de empacadora</label>
          <input class="form-control mb-3" id="edit-name" value="${item.name}"/>
        `;
      } else {
        container.innerHTML += `
          <label>Gramaje (g)</label>
          <input class="form-control mb-3" id="edit-gramos" type="number" value="${item.gramos}"/>
        `;
      }
      container.innerHTML += `
        <label>Precio (MXN)</label>
        <input class="form-control mb-3" id="edit-price" type="number" step="0.01" value="${item.price}"/>
      `;
      section.style.display = 'block';

      document.getElementById('edit-form').onsubmit = e => {
        e.preventDefault();
        if(mode==='empaque') {
          dataByEmpaque[idx].name = document.getElementById('edit-name').value;
        } else {
          dataByGramaje[idx].gramos = parseFloat(document.getElementById('edit-gramos').value);
        }
        dataByEmpaque[idx].price = parseFloat(document.getElementById('edit-price').value);
        section.style.display = 'none';
        renderTables();
      };
      document.getElementById('cancel-btn').onclick = () => {
        section.style.display = 'none';
      };
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderTables();
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
